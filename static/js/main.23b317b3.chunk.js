(this["webpackJsonpeog-react-visualization-base"]=this["webpackJsonpeog-react-visualization-base"]||[]).push([[0],{69:function(e,t,n){e.exports=n(94)},94:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(12),i=n.n(c),o=n(17),l=n(50),u=n(65),s=n(63),m=n(30),p=n.n(m),f=n(43),h="EVENT/API_ERROR_RECEIVED",d=n(35),v=p.a.mark(g),b=p.a.mark(E);function g(e){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.a)(d.b.error,"Error Received: ".concat(e.error));case 2:case"end":return t.stop()}}),v)}function E(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.b)(h,g);case 2:case"end":return e.stop()}}),b)}var O=[E],y=Object(s.a)(O),j=n(26);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M={},S=Object(j.a)({},"EVENT/METRIC_DATA_RECEIVED",(function(e,t){var n,r=t.payload;if(e.metric)return n={},Object(j.a)(n,e.metric,x({},e)),Object(j.a)(n,r.metric,x({},r)),n;var a=x({},e,Object(j.a)({},r.metric,x({},r)));return x({},a)})),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0,n=S[t.type];return"undefined"===typeof n?e:n(e,t)},T=n(23),k=n(62),C=n(114),P=n(115),R=(n(81),n(112)),I=n(110),N=n(111),q=n(54),A=Object(q.a)({grow:{flexGrow:1}}),G=function(){var e=A();return a.a.createElement(I.a,{position:"static"},a.a.createElement(N.a,null,a.a.createElement(R.a,{variant:"h6",color:"inherit",className:e.grow},"stephen's"," EOG React Visualization Assessment")))},V=Object(q.a)((function(e){return{wrapper:{background:e.palette.background.main,height:"100vh"}}})),W=function(e){var t=e.children,n=V();return a.a.createElement("div",{className:n.wrapper},t)},_=n(25),z=n(55),J=n(56),B=n.n(J),F=n(57),H=n(20);function $(){var e=Object(z.a)(["\n\tsubscription newMeasurement {\n\t\tnewMeasurement{\n\t\t\tmetric\n\t\t\tat\n\t\t\tvalue\n\t\t\tunit\n\t\t}\n\t}\n"]);return $=function(){return e},e}var K=B()($()),L=new F.SubscriptionClient("wss://react.eogresources.com/graphql",{}),Q=Object(H.c)({url:"https://react.eogresources.com/graphql",exchanges:[H.b,H.d,Object(H.e)({forwardSubscription:function(e){return L.request(e)}})]}),U=function(){var e=Object(T.c)(),t=Object(H.f)({query:K},(function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=arguments.length>1?arguments[1]:void 0;return e({type:"EVENT/METRIC_DATA_RECEIVED",payload:t.newMeasurement}),[]})),n=Object(_.a)(t,1)[0];return void 0!==n.error?a.a.createElement("div",null,n.error.message):void 0===n.data?null:a.a.createElement(a.a.Fragment,null)},X=function(){return a.a.createElement(H.a,{value:Q},a.a.createElement(U,null))},Y=n(61),Z=function(e){var t=e.options,n=e.onSelectedMetricsChange,r=t.map((function(e){return{value:e,label:e}}));return a.a.createElement(Y.a,{isMulti:!0,onChange:n,options:r})},ee=n(113),te=function(e){var t=e.whichMetric,n=e.metric[t]||{},r=n.metric,c=n.value;return a.a.createElement(ee.a,{style:{boxShadow:"1px 1px 1px 1px",minWidth:"15em",minHeight:"15em",zIndex:2,margin:"1em"}},a.a.createElement("div",{style:{display:"flex",flexGrow:1,height:"100%",width:"100%",justifyContent:"center",alignItems:"center",textAlign:"center"}},a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement(R.a,{variant:"h6"},r),a.a.createElement(R.a,{variant:"h3"},c))))},ne=function(e){var t=e.selectedMetrics,n=e.metric,r=t&&t.map((function(e){return e.value}));return a.a.createElement("div",{style:{zIndex:2,position:"absolute",width:"60%"}},a.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",flexBasis:1,flexShrink:1}},(r||[]).map((function(e,t){return a.a.createElement(te,{key:"mc_".concat(t),whichMetric:e,metric:n})}))))},re=(n(91),n(60)),ae=n(40),ce=n.n(ae),ie=function(e){var t=e.metric,n=e.getGraphMetrics,r=void 0===n?[]:n;if(!r||!r.length)return null;var c=function(e){var t=e.metric,n=e.getGraphMetrics;return n.length?n.map((function(e){var n=e.metric,r=e.measurements;t[n]&&t[n].value!==r[r.length-1].value&&(r.push({at:t[n].at,value:t[n].value}),r.shift());var a={};return r.forEach((function(e){var t=e.at,n=e.value;a[ce()(t).format("hh:mm:ss A")]=n})),{name:n,data:a}})):[]}({metric:t,getGraphMetrics:r});return a.a.createElement("div",null,a.a.createElement(re.a,{data:c}))},oe=Object(T.b)((function(e){return{metric:e.metric,weather:e.weather}}))((function(e){var t=Object(r.useState)([]),n=Object(_.a)(t,2),c=n[0],i=n[1],o=Object(r.useState)([]),l=Object(_.a)(o,2),u=l[0],s=l[1],m=Object(r.useState)([]),p=Object(_.a)(m,2),f=p[0],h=p[1];return Object(r.useEffect)((function(){var e=c&&c.reduce((function(e,t){return e+'{ metricName: "'.concat(t.value,'", after: ').concat(ce()().subtract(1,"minute").toDate().getTime()," },")}),""),t="[".concat(e||"","]");return fetch("https://react.eogresources.com/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"\n        { getMultipleMeasurements(input: ".concat(t," ) {\n            metric\n            measurements {\n              unit\n              metric\n              at\n              value\n            }\n          }\n        }\n      ")})}).then((function(e){return e.json()})).then((function(e){e.data&&e.data.getMultipleMeasurements&&e.data.getMultipleMeasurements.length&&h(e.data.getMultipleMeasurements)})),function(){}}),[c]),Object(r.useEffect)((function(){return fetch("https://react.eogresources.com/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"{ getMetrics }"})}).then((function(e){return e.json()})).then((function(e){s(e.data.getMetrics)})),function(){}}),[]),a.a.createElement("div",{style:{display:"flex",flexDirection:"column",flexGrow:1}},a.a.createElement("div",null,a.a.createElement(ne,Object.assign({selectedMetrics:c},e))),a.a.createElement("div",{style:{display:"flex"}},a.a.createElement("div",{style:{minWidth:"75%",padding:1}}),a.a.createElement("div",{style:{minWidth:"25%",maxWidth:"25%"}},a.a.createElement(Z,{options:u,selectedMetrics:c,onSelectedMetricsChange:i}))),a.a.createElement("div",null,a.a.createElement(ie,Object.assign({},e,{getGraphMetrics:c&&c.length&&f}))),a.a.createElement(X,null))})),le=function(){var e=Object(o.combineReducers)({metric:D}),t=Object(l.composeWithDevTools)({}),n=Object(u.a)(),r=Object(o.applyMiddleware)(n),a=Object(o.createStore)(e,t(r));return y.forEach(n.run),a}(),ue=Object(k.a)({typography:{useNextVariants:!0},palette:{primary:{main:"rgb(39,49,66)"},secondary:{main:"rgb(197,208,222)"},background:{main:"rgb(226,231,238)"}}}),se=function(e){return a.a.createElement(C.a,{theme:ue},a.a.createElement(P.a,null),a.a.createElement(T.a,{store:le},a.a.createElement(W,null,a.a.createElement(G,null),a.a.createElement(oe,null),a.a.createElement(d.a,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[69,1,2]]]);
//# sourceMappingURL=main.23b317b3.chunk.js.map